{% extends "base.html" %}
{% block content %}

<div class="carousel center"  id="carousel-auto">
    <div class="carousel-item white-text" href="#one!">
      <img src="https://cdn.thecoolist.com/wp-content/uploads/2017/02/Chevy-Camaro-1967-69-vintage-car-1095x542.jpg">
    </div>
    <div class="carousel-item white-text" href="#two!">
      <img src="https://www.kienle.com/fileadmin/_processed_/1/c/csm_faszination-oldtimer-header-xs_33e6719298.jpg">
    </div>
    <div class="carousel-item white-text" href="#three!">
      <img src="https://chauffeursonline.ie/wp-content/uploads/2019/11/Beauford-ivory-and-black-2.jpg">
    </div>
    <div class="carousel-item white-text" href="#four!">
      <img src="https://coolmaterial.com/wp-content/uploads/2012/03/15-classic-cars-that-define-cool-hero-1000x600.jpg">
    </div>
  </div>

<div class="row card-panel teal lighten-4">
    <form action="{{ url_for('search') }}" method="post" class="col s12">
        <div class="row valign-wrapper center-aling">
            <div class="input-field col s12 m8">
                <i class="fas fa-search grey-text text-darken-4 prefix"></i>
                <input type="text" name="query" id="query" class="validate" minlength="3" required>
                <label for="query">Search Cars</label>
            </div>
            <div class="col s12 m4">
                <a href="{{ url_for('get_cars') }}" class="red btn text-shadow">Reset</a>
                <button type="submit" class="btn teal darken-4">
                <i class="fas fa-search left"></i> Search
                </button>
            </div>
        </div>
    </form>
</div>
{% if cars|length > 0 %}
    {% for category in categories %}   
    <div class="col s12 m7">
        <h2 class="header purple-text text-lighten-1" style="font-size:3vw">Vintage Cars</h2>
        <div class="card horizontal teal lighten-4">
            <div class="card-image">
                <img class="responsive-img"  style="height: 150px"
                    src="{{ category.image_url }}">
            </div>
            <div class="card-stacked">
                <div class="card-content">
                    <span class="card-title activator grey-text text-darken-4" style="font-size:4vw">
                        {{ category.category_name }}<i class="fas fa-info-circle  right" style="font-size:3vw"></i></span>
                </div>
                <div class="card-action grey-text text-darken-4">
                    <a href="#">See Vintage Sport Cars</a>
                </div>
            </div> 
            <div class="card-reveal teal lighten-4">
                <span class="card-title grey-text text-darken-4" style="font-size:3vw">
                    {{ category.category_name }}<i class="fas fa-window-close right" style="font-size:2vw"></i></span>
                <p class="teal-text text-darken-1">A sports car is a car designed with an emphasis on dynamic performance, such as handling,
                    acceleration, top speed, or thrill of driving. Sports cars originated in Europe in the early 
                    1900s and are currently produced by many manufacturers around the world.</p>
            </div>
        </div>
    </div>

    <ul>
        {% for car in cars %}
        <li>
            {% if car.category_name == category.category_name %}
            <div class="collection teal purple-text text-darken-4" 
                style="border: 2px solid rgb(82, 82, 136); font-size:22px">
                <div class="col s9 left">
                    <strong>Make: {{ car.car_name }} Model: {{ car.car_model }}</strong><br>
                    <span>Year: {{ car.car_year }} Fuel: {{ car.car_fuel }} Created by: {{ car.created_by }}</span>
                </div>
                <div class="col s3 right">
                    {% if session.user|lower == car.created_by|lower %}
                        <a href="{{ url_for('edit_car', car_id=car._id ) }}" class="btn-small">Edit</a>
                        <a href="#modal1" class="btn-small modal-trigger">Delete</a>
                        <div id="modal1" class="modal teal lighten-4">
                            <div class="modal-content">
                                <h4>Deleting Car</h4>
                                <p>Are you sure, you want to delete this car?</p>
                            </div>
                            <div class="modal-footer teal lighten-4">
                                <a href="{{ url_for('get_cars' )}}" class="modal-action waves-effect red darken-4 btn ">Cancel</a>
                                <a href="{{ url_for('delete_car', car_id=car._id ) }}" class="modal-action waves-effect waves-green btn ">Delete</a>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
            {% endif %}
        </li>
        {% endfor %} 
    </ul>
    {% endfor%}
{% else%}
    <h3 class="red-text text-darken center">No Results Found</h3>
{% endif %}
{% endblock %}